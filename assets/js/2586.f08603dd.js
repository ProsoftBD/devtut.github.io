(window.webpackJsonp=window.webpackJsonp||[]).push([[2586],{2932:function(e,a,t){"use strict";t.r(a);var s=t(19),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"desired-state-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#desired-state-configuration"}},[e._v("#")]),e._v(" Desired State Configuration")]),e._v(" "),t("h2",{attrs:{id:"simple-example-enabling-windowsfeature"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#simple-example-enabling-windowsfeature"}},[e._v("#")]),e._v(" Simple example - Enabling WindowsFeature")]),e._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[e._v("configuration EnableIISFeature\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    node localhost\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        WindowsFeature IIS\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n            Ensure = “Present”\n            Name = “Web"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Server”                      \n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),t("p",[e._v('If you run this configuration in Powershell (EnableIISFeature), it will produce a localhost.mof file. This is the "compiled" configuration you can run on a machine.')]),e._v(" "),t("p",[e._v("To test the DSC configuration on your localhost, you can simply invoke the following:")]),e._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Start")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("DscConfiguration "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ComputerName localhost "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Wait \n\n")])])]),t("h2",{attrs:{id:"starting-dsc-mof-on-remote-machine"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#starting-dsc-mof-on-remote-machine"}},[e._v("#")]),e._v(" Starting DSC (mof) on remote machine")]),e._v(" "),t("p",[e._v("Starting a DSC on a remote machine is almost just as simple. Assuming you've already set up Powershell remoting (or enabled WSMAN).")]),e._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$remoteComputer")]),e._v(" = "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"myserver.somedomain.com"')]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$cred")]),e._v(" = "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("Get"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Credential"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Start")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("DSCConfiguration "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("ServerName "),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$remoteComputer")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Credential "),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$cred")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("Verbose\n\n")])])]),t("p",[t("strong",[e._v("Nb:")]),e._v(" Assuming you have compiled a configuration for your node on your localmachine (and that the file myserver.somedomain.com.mof is present prior to starting the configuration)")]),e._v(" "),t("h2",{attrs:{id:"importing-psd1-data-file-into-local-variable"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#importing-psd1-data-file-into-local-variable"}},[e._v("#")]),e._v(" Importing psd1 (data file) into local variable")]),e._v(" "),t("p",[e._v("Sometimes it can be useful to test your Powershell data files and iterate through the nodes and servers.")]),e._v(" "),t("p",[e._v("Powershell 5 (WMF5) added this neat little feature for doing this called Import-PowerShellDataFile .")]),e._v(" "),t("p",[e._v("Example:")]),e._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$data")]),e._v(" = Import"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("PowerShellDataFile "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("path "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("\\MydataFile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("psd1\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$data")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("AllNodes\n\n")])])]),t("h2",{attrs:{id:"list-available-dsc-resources"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#list-available-dsc-resources"}},[e._v("#")]),e._v(" List available DSC Resources")]),e._v(" "),t("p",[e._v("To list available DSC resources on your authoring node:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\nGet-DscResource \n\n")])])]),t("p",[e._v("This will list all resources for all installed modules (that are in your PSModulePath) on your authoring node.")]),e._v(" "),t("p",[e._v("To list all available DSC resources that can be found in the online sources (PSGallery ++) on WMF 5 :")]),e._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[e._v("Find"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("DSCResource\n\n")])])]),t("h2",{attrs:{id:"importing-resources-for-use-in-dsc"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#importing-resources-for-use-in-dsc"}},[e._v("#")]),e._v(" Importing resources for use in DSC")]),e._v(" "),t("p",[e._v("Before you can use a resource in a configuration, you must explicitly import it. Just having it installed on your computer, will not let you use the resource implicitly.")]),e._v(" "),t("p",[e._v("Import a resource by using Import-DscResource .")]),e._v(" "),t("p",[e._v("Example showing how to import the PSDesiredStateConfiguration resource and the File resource.")]),e._v(" "),t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[e._v("Configuration InstallPreReqs\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("param")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# params to DSC goes here.")]),e._v("\n\n   Import"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("DscResource PSDesiredStateConfiguration \n\n   File CheckForTmpFolder "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("Type")]),e._v(" = "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Directory'")]),e._v("\n        DestinationPath = "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'C:\\Tmp'")]),e._v("\n        Ensure = "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"Present"')]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])])]),t("p",[t("strong",[e._v("Note")]),e._v(": In order for DSC Resources to work, you must have the modules installed on the target machines when running the configuration. If you don't have them installed, the configuration will fail.")])])}),[],!1,null,null,null);a.default=r.exports}}]);