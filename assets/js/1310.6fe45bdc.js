(window.webpackJsonp=window.webpackJsonp||[]).push([[1310],{1656:function(t,e,o){"use strict";o.r(e);var a=o(19),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"app-transport-security-ats"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#app-transport-security-ats"}},[t._v("#")]),t._v(" App Transport Security (ATS)")]),t._v(" "),o("h2",{attrs:{id:"load-all-http-content"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#load-all-http-content"}},[t._v("#")]),t._v(" Load all HTTP content")]),t._v(" "),o("p",[t._v("Apple introduced ATS with iOS 9 as a new security feature to improve privacy and security between apps and web services. ATS by default fails all non HTTPS requests. While this can be really nice for production environments, it can be a nuisance during testing.")]),t._v(" "),o("p",[t._v("ATS is configured in the target's "),o("code",[t._v("Info.plist")]),t._v(" file with the "),o("code",[t._v("NSAppTransportSecurity")]),t._v(" dictionary ("),o("code",[t._v("App Transport Security Settings")]),t._v(" in the Xcode Info.plist editor). To allow all HTTP content, add the "),o("code",[t._v("Allow Arbitrary Loads")]),t._v(" boolean ("),o("code",[t._v("NSAllowsArbitraryLoads")]),t._v(") and set it to "),o("code",[t._v("YES")]),t._v(". This is not recommended for production apps, and if HTTP content is required, it is recommended that it be selectively enabled instead.")]),t._v(" "),o("h2",{attrs:{id:"selectively-load-http-content"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#selectively-load-http-content"}},[t._v("#")]),t._v(" Selectively load HTTP content")]),t._v(" "),o("p",[t._v("Similar to enabling all HTTP content, all configuration happens under the "),o("code",[t._v("App Transport Security Settings")]),t._v(". Add the "),o("code",[t._v("Exception Domains")]),t._v(" dictionary ("),o("code",[t._v("NSExceptionDomains")]),t._v(") to the top level ATS settings.")]),t._v(" "),o("p",[t._v("For every domain, add a dictionary item to the Exception Domains, where the key is the domain in question. Set "),o("code",[t._v("NSExceptionAllowsInsecureHTTPLoads")]),t._v(" to "),o("code",[t._v("YES")]),t._v(" to disable the HTTPS requirement for that domain.")]),t._v(" "),o("h2",{attrs:{id:"endpoints-require-ssl"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#endpoints-require-ssl"}},[t._v("#")]),t._v(" Endpoints require SSL")]),t._v(" "),o("p",[t._v("Introduced in iOS 9, all endpoints must adhere to the HTTPS specification."),o("br"),t._v("\nAny endpoints not using SSL will fail with a warning in the console log. To your application it will appear that the internet connection failed.")]),t._v(" "),o("p",[t._v("To configure exceptions: Place the following in your Info.plist file:")]),t._v(" "),o("ol",[o("li",[t._v("Allow particular domain (testdomain.com) "),o("strong",[t._v("only")]),t._v(":")])]),t._v(" "),o("div",{staticClass:"language-swift extra-class"},[o("pre",{pre:!0,attrs:{class:"language-swift"}},[o("code",[o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),o("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("NSAppTransportSecurity")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dict"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),o("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("NSExceptionDomains")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dict"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("testdomain"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dict"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),o("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("NSIncludesSubdomains")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),o("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("NSExceptionAllowsInsecureHTTPLoads")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dict"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dict"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n")])])]),o("p",[t._v("The key that permits such behavior is "),o("code",[t._v("NSExceptionAllowsInsecureHTTPLoads")]),t._v(". In this case, app will allow HTTP connection to mentioned domain (testdomain.com) only and block all other HTTP connections.")]),t._v(" "),o("p",[t._v("The key "),o("code",[t._v("NSIncludesSubdomains")]),t._v(" specifies that any and all "),o("strong",[t._v("subdomains")]),t._v(" of the mentioned domain (testdomain.com) should also be allowed.")]),t._v(" "),o("ol",[o("li",[t._v("Allow any domain:")])]),t._v(" "),o("div",{staticClass:"language-swift extra-class"},[o("pre",{pre:!0,attrs:{class:"language-swift"}},[o("code",[o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),o("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("NSAppTransportSecurity")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("dict"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),o("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("NSAllowsArbitraryLoads")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("key"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dict"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n")])])]),o("p",[t._v("In this case, app will allow HTTP connection to "),o("strong",[t._v("any")]),t._v(" domain. As of January 1st 2017, using this flag will cause thorough App Store review and the app developers will have to explain why they need to use this exception in the first place. Possible explanations include:")]),t._v(" "),o("ul",[o("li",[t._v("An application that loads encrypted media content that contains no personalized information.")]),t._v(" "),o("li",[t._v("Connections to devices that cannot be upgraded to use secure connections.")]),t._v(" "),o("li",[t._v("Connection to a server that is managed by another entity and does not support secure connections.")])]),t._v(" "),o("h4",{attrs:{id:"parameters"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#parameters"}},[t._v("#")]),t._v(" Parameters")]),t._v(" "),o("table",[o("thead",[o("tr",[o("th",[t._v("Parameter")]),t._v(" "),o("th",[t._v("Details")])])]),t._v(" "),o("tbody",[o("tr",[o("td",[o("code",[t._v("NSAppTransportSecurity")])]),t._v(" "),o("td",[t._v("Configure ATS")])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSAllowsArbitraryLoads")])]),t._v(" "),o("td",[t._v("Set to "),o("code",[t._v("YES")]),t._v(" to disable ATS everywhere. In iOS 10 and later, and macOS 10.12 and later, the value of this key is ignored if any of the following keys are present in your app’s Info.plist file: NSAllowsArbitraryLoadsInMedia, NSAllowsArbitraryLoadsInWebContent, NSAllowsLocalNetworking")])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSAllowsArbitraryLoadsInMedia")])]),t._v(" "),o("td",[t._v("Set to "),o("code",[t._v("YES")]),t._v(" to disable ATS for media loaded using APIs from the AV Foundation framework. "),o("strong",[o("strong",[t._v("(iOS 10+, macOS 10.12+)")])])])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSAllowsArbitraryLoadsInWebContent")])]),t._v(" "),o("td",[t._v("Set to "),o("code",[t._v("YES")]),t._v(" to disable ATS in your app’s web views ("),o("code",[t._v("WKWebView")]),t._v(", "),o("code",[t._v("UIWebView")]),t._v(", "),o("code",[t._v("WebView")]),t._v(") without affecting your NSURLSession connections. "),o("strong",[o("strong",[t._v("(iOS 10+, macOS 10.12+)")])])])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSAllowsLocalNetworking")])]),t._v(" "),o("td",[t._v("Set to "),o("code",[t._v("YES")]),t._v(" to disable for connections to unqualified domains and to .local domains. "),o("strong",[o("strong",[t._v("(iOS 10+, macOS 10.12+)")])])])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSExceptionDomains")])]),t._v(" "),o("td",[t._v("Configure exceptions for specific domains")])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSIncludesSubdomains")])]),t._v(" "),o("td",[t._v("Set to "),o("code",[t._v("YES")]),t._v(" to apply the exceptions to all subdomains of the selected domain.")])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSRequiresCertificateTransparency")])]),t._v(" "),o("td",[t._v("Set to "),o("code",[t._v("YES")]),t._v(" to require that valid, signed Certificate Transparency (CT) timestamps, from known CT logs, be presented for server (X.509) certificates on a domain. "),o("strong",[o("strong",[t._v("(iOS 10+, macOS 10.12+)")])])])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSExceptionAllowsInsecureHTTPLoads")])]),t._v(" "),o("td",[t._v("Set to "),o("code",[t._v("YES")]),t._v(" to allow HTTP on the selected domain.")])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSExceptionRequiresForwardSecrecy")])]),t._v(" "),o("td",[t._v("Defaults to "),o("code",[t._v("YES")]),t._v("; Set to "),o("code",[t._v("NO")]),t._v(" to disable Forward Secrecy and accept more ciphers.")])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSExceptionMinimumTLSVersion")])]),t._v(" "),o("td",[t._v("Defaults to "),o("code",[t._v("TLSv1.2")]),t._v("; Possible values are: "),o("code",[t._v("TLSv1.0")]),t._v(", "),o("code",[t._v("TLSv1.1")]),t._v(", "),o("code",[t._v("TLSv1.2")])])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSThirdPartyExceptionAllowsInsecureHTTPLoads")])]),t._v(" "),o("td",[t._v("Similar to "),o("code",[t._v("NSExceptionAllowsInsecureHTTPLoads")]),t._v(", but for domains that you have no control over")])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSThirdPartyExceptionRequiresForwardSecrecy")])]),t._v(" "),o("td",[t._v("Similar to "),o("code",[t._v("NSExceptionRequiresForwardSecrecy")]),t._v(", but for domains that you have no control over")])]),t._v(" "),o("tr",[o("td",[o("code",[t._v("NSThirdPartyExceptionMinimumTLSVersion")])]),t._v(" "),o("td",[t._v("Similar to "),o("code",[t._v("NSExceptionMinimumTLSVersion")]),t._v(", but for domains that you have no control over")])])])]),t._v(" "),o("h4",{attrs:{id:"remarks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#remarks"}},[t._v("#")]),t._v(" Remarks")]),t._v(" "),o("p",[t._v("The "),o("a",{attrs:{href:"https://developer.apple.com/library/content/releasenotes/General/WhatsNewIniOS/Articles/iOS9.html#//apple_ref/doc/uid/TP40016198-SW14",target:"_blank",rel:"noopener noreferrer"}},[t._v("App Transport Security"),o("OutboundLink")],1),t._v(" is a security feature in iOS and macOS. It prevents apps from establishing unsecured connections. By default, apps can only use secure HTTPS connections.")]),t._v(" "),o("p",[t._v("If an app needs to connect to a server via HTTP, exceptions must be defined in the "),o("code",[t._v("Info.plist")]),t._v(". (see the examples for more information about that)")]),t._v(" "),o("p",[o("strong",[t._v("Note:")]),t._v(" In 2017, Apple will enforce ATS. That means, that you can no longer upload apps that have ATS-exceptions defined in the "),o("code",[t._v("Info.plist")]),t._v(". If you can provide good arguments, why you have to use HTTP, you can contact Apple and they might allow you to define exceptions. (Source: "),o("a",{attrs:{href:"https://developer.apple.com/videos/play/wwdc2016/706/",target:"_blank",rel:"noopener noreferrer"}},[t._v("WWDC 2016 - Session 706"),o("OutboundLink")],1),t._v(")")]),t._v(" "),o("p",[t._v("More information on the App Transport Security configuration can be found in the "),o("a",{attrs:{href:"https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW33",target:"_blank",rel:"noopener noreferrer"}},[t._v("CocoaKeys Documentation"),o("OutboundLink")],1),t._v(".")])])}),[],!1,null,null,null);e.default=r.exports}}]);